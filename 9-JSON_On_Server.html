<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="assets/style.css?t=a44c9e9d">
    <link rel="stylesheet" href="http://ricostacruz.com/docpress-rsc/style.css">
    <script src="assets/script.js?t=2bcc4b59"></script>
    <title>第九章：伺服器端的 JSON</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="body page-9-json_on_server">
        <div class="header-nav">
          <div class="right"><a href="https://github.com/MiniaspReading/guide-to-json" data-title="MiniaspReading/guide-to-json" class="iconlink">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="json">&#x7B2C;&#x4E5D;&#x7AE0; &#x4F3A;&#x670D;&#x5668;&#x7AEF;&#x7684; JSON</h1>
<p>&#x5728;&#x7B2C;&#x516B;&#x7AE0;&#x6211;&#x5011;&#x4F7F;&#x7528; <em>HTTP</em> &#x4F86;&#x767C;&#x9001; <em>JSON</em> &#x6587;&#x4EF6;&#x7D66; <em>CouchDB</em> &#x7684; API&#xFF0C;&#x4F3A;&#x670D;&#x5668;&#x7AEF;&#x7A0B;&#x5F0F;&#x5C31;&#x5FC5;&#x9808;&#x89E3;&#x6790;&#x7D50;&#x69CB;&#xFF0C;
&#x505A;&#x51FA;&#x76F8;&#x5C0D;&#x7684;&#x52D5;&#x4F5C;&#x61C9;&#x4E26;&#x56DE;&#x50B3;&#x7D50;&#x679C;&#x3002;
&#x5206;&#x985E;&#x4F3A;&#x670D;&#x5668;&#x7AEF;&#x8207;&#x7528;&#x6236;&#x7AEF;&#x6280;&#x8853;&#x5206;&#x985E;&#xFF1A;</p>
<ul>
<li>&#x7528;&#x6236;&#x7AEF;&#xFF1A;HTML&#x3001;CSS&#x3001;Javascript...&#x7B49;&#x3002;</li>
<li>&#x4F3A;&#x670D;&#x5668;&#x7AEF;&#xFF1A;PHP&#x3001;ASP .NET&#x3001;Node.js...&#x7B49;&#x3002;</li>
</ul>
<h2 id="9-1-json">9-1 &#x5E8F;&#x5217;&#x5316;&#x3001;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x8207;&#x8ACB;&#x6C42;JSON</h2>
<p>&#x7DB2;&#x8DEF;&#x4E0A;&#x7684;&#x8CC7;&#x6599;&#x4EA4;&#x63DB;&#x683C;&#x5F0F;&#x9700;&#x8981;&#x7528;&#x6236;&#x7AEF;&#x8207;&#x4F3A;&#x670D;&#x5668;&#x7684;&#x652F;&#x63F4;&#xFF0C;&#x5982;&#x679C;&#x53EA;&#x6709;&#x7528;&#x6236;&#x7AEF;&#x652F;&#x63F4;&#x6C92;&#x6709;&#x4F3A;&#x670D;&#x5668;&#x7AEF;&#x652F;&#x63F4;&#xFF0C;JSON &#x6703;&#x6D88;&#x901D;&#x3002;&#x5E78;&#x597D;JSON&#x683C;&#x5F0F;
&#x53D7;&#x5927;&#x90E8;&#x5206;&#x4F3A;&#x670D;&#x5668;&#x7AEF;&#x7DB2;&#x8DEF;&#x67B6;&#x69CB;&#x8207;&#x7A0B;&#x5F0F;&#x8A9E;&#x8A00;&#x7684;&#x652F;&#x63F4;&#x3002;&#x82E5;&#x6C92;&#x6709;&#x5167;&#x5EFA; JSON &#x5E8F;&#x5217;&#x5316;&#x6216;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x652F;&#x63F4;&#xFF0C;&#x5176;&#x51FD;&#x5F0F;&#x5EAB;&#x6216;&#x64F4;&#x5145;&#x5957;&#x4EF6;&#x4E5F;&#x6703;&#x652F;&#x63F4;&#x3002;</p>
<pre><code>&#x5E8F;&#x5217;&#x5316;&#xFF1A;&#x5C07;&#x7269;&#x4EF6;&#x8F49;&#x5316;&#x6210;&#x6587;&#x5B57;&#x7684;&#x52D5;&#x4F5C; 
&#x53CD;&#x5E8F;&#x5217;&#x5316;&#xFF1A;&#x5C07;&#x6587;&#x5B57;&#x8F49;&#x5316;&#x6210;&#x7269;&#x4EF6;&#x7684;&#x52D5;&#x4F5C;
</code></pre>
<h3 id="9-1-1-asp-.net">9-1-1 ASP .NET</h3>
<p>&#x70BA;&#x89E3;&#x6790; JSON &#xFF0C;&#x6211;&#x5011;&#x5FC5;&#x9808;&#x4F7F;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x7684; ASP .NET &#x51FD;&#x5F0F;&#x5EAB;&#xFF0C;&#x6211;&#x5011;&#x4F7F;&#x7528;&#x7684;&#x51FD;&#x5F0F;&#x5EAB;&#x70BA; Json .Net &#xFF0C;&#x4ED6;&#x4F86;&#x81F3;
<a href="http://www.newtonsoft.com/json">Newtonsoft</a> &#x7684;&#x958B;&#x6E90; JSON &#x67B6;&#x69CB;&#x3002;</p>
<h3 id="9-1-2-json">9-1-2 JSON &#x5E8F;&#x5217;&#x5316;</h3>
<p>&#x5C08;&#x6848;&#x900F;&#x904E; <a href="https://www.nuget.org/packages/Newtonsoft.Json/">Nuget</a> &#x5B89;&#x88DD; JSON .NET&#x3002;</p>
<p><code>PM&gt; Install-Package Newtonsoft.Json</code></p>
<p>ASP .NET C# &#x4E2D;&#x5B9A;&#x7FA9; Accousts &#x578B;&#x5225;</p>
<pre><code class="lang-sh">public class Account
{
    public string firstName {get; <span class="pl-c1">set</span>;}
    public string lastName {get; <span class="pl-c1">set</span>;}
    public int age {get; <span class="pl-c1">set</span>;}
    public Address[] address {get; <span class="pl-c1">set</span>;}    
}

    public class Address
{
    public string street {get; <span class="pl-c1">set</span>;}
    public string city {get; <span class="pl-c1">set</span>;}
    public string state {get; <span class="pl-c1">set</span>;}
    public int zip {get; <span class="pl-c1">set</span>;}    
}
</code></pre>
<p>&#x7A0B;&#x5F0F;&#x4E2D;&#x5EFA;&#x7ACB;&#x65B0;&#x7684;&#x7269;&#x4EF6;&#x4E26;&#x7D66;&#x5B9A;&#x503C;&#x3002;</p>
<pre><code class="lang-sh"> Account myaccount = new Account();
 myaccount.firstName = <span class="pl-s">&quot;Bob&quot;</span>;
 myaccount.lastName = <span class="pl-s">&quot;Barker&quot;</span>;
 myaccount.age = <span class="hljs-number">91</span>;
 
 Address[] addrsses;
 addrsses = new Address[<span class="hljs-number">2</span>];
 
 Address myaddress1= new Address();
 myaddress1.street=<span class="pl-s">&quot;123 fake st&quot;</span>;
 myaddress1.city=<span class="pl-s">&quot;Somewhere&quot;</span>;
 myaddress1.state=<span class="pl-s">&quot;OR&quot;</span>;
 myaddress1.zip=<span class="hljs-number">1234</span>;
 
 addrsses[<span class="hljs-number">0</span>] = myaddress1;
 
 Address myaddress2= new Address();
 myaddress2.street=<span class="pl-s">&quot;456 fake st&quot;</span>;
 myaddress2.city=<span class="pl-s">&quot;Some Place&quot;</span>;
 myaddress2.state=<span class="pl-s">&quot;CA&quot;</span>;
 myaddress2.zip=<span class="hljs-number">9600</span>;
 
 addrsses[<span class="hljs-number">1</span>] = myaddress2;
 
 myaccount.Address = addrsses;
 
</code></pre>
<p>&#x6700;&#x5F8C;&#x4F7F;&#x7528; JSON .NET &#x51FD;&#x5F0F;&#x5EAB;&#x5C07;&#x6B64;&#x7269;&#x4EF6;&#x5E8F;&#x5217;&#x5316;&#x6210; JSON &#x3002;</p>
<pre><code class="lang-sh"> string json = JsonConvert.SerializeObject(myaccount);
</code></pre>
<p>&#x7269;&#x4EF6;&#x5E8F;&#x5217;&#x5316;&#x6210; JSON &#x7684;&#x7D50;&#x679C;&#x3002;</p>
<pre><code class="lang-sh">{
  <span class="pl-s">&quot;firstName&quot;</span>: <span class="pl-s">&quot;Bob&quot;</span>,
  <span class="pl-s">&quot;lastName&quot;</span> : <span class="pl-s">&quot;Barker&quot;</span>,
  <span class="pl-s">&quot;age&quot;</span> : <span class="hljs-number">91</span>,
  <span class="pl-s">&quot;address&quot;</span> : [
				{
				<span class="pl-s">&quot;street&quot;</span> : <span class="pl-s">&quot;123 fake st&quot;</span>,
				<span class="pl-s">&quot;city&quot;</span> : <span class="pl-s">&quot;Somewhere&quot;</span>,
				<span class="pl-s">&quot;state&quot;</span> : <span class="pl-s">&quot;OR&quot;</span>,
				<span class="pl-s">&quot;zip&quot;</span> : <span class="pl-s">&quot;97520&quot;</span>
				},
				{
				<span class="pl-s">&quot;street&quot;</span> : <span class="pl-s">&quot;456 fake st&quot;</span>,
				<span class="pl-s">&quot;city&quot;</span> : <span class="pl-s">&quot;Some Place&quot;</span>,
				<span class="pl-s">&quot;state&quot;</span> : <span class="pl-s">&quot;CA&quot;</span>,
				<span class="pl-s">&quot;zip&quot;</span> : <span class="pl-s">&quot;9600&quot;</span>
				}
  			  ]		
}
</code></pre>
<h3 id="9-1-3-json">9-1-3 JSON &#x53CD;&#x5E8F;&#x5217;&#x5316;</h3>
<p>&#x5C07;&#x524D;&#x4E00;&#x4F8B;&#x7684; JSON &#x5B57;&#x4E32;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x5C07;&#x6703;&#x88AB;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x6210; Accousts &#x578B;&#x5225;&#x3002;</p>
<pre><code class="lang-sh">Account account = JsonConvert.DeserializeObject&lt;Account&gt;(json);
</code></pre>
<p>&#x91CD;&#x9EDE;&#x662F;&#x6211;&#x5011;&#x7684;&#x7269;&#x4EF6;&#x5C6C;&#x6027;&#x540D;&#x7A31;&#x8207; JSON &#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x540D;&#x7A31;-&#x503C;&#x5C0D;&#x7684;&#x540D;&#x7A31;&#x8981;&#x76F8;&#x7B26;&#xFF0C;&#x4E0D;&#x7136;&#x6703;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5931;&#x6557;&#x3002;</p>
<h3 id="9-1-4-json">9-1-4 &#x8ACB;&#x6C42; JSON</h3>
<p>&#x5728;ASP .NET &#x74B0;&#x5883;&#x4E2D;&#xFF0C;&#x901A;&#x5E38;&#x9700;&#x8981;&#x8F38;&#x51FA; JSON &#x683C;&#x5F0F;&#x7D66;&#x524D;&#x7AEF;&#x904B;&#x7528;&#xFF0C;&#x90FD;&#x6703;&#x4F7F;&#x7528; WebAPI &#x7684;&#x65B9;&#x5F0F;&#x958B;&#x767C;&#xFF0C;&#x56E0;&#x70BA;&#x9810;&#x8A2D;&#x56DE;&#x61C9;&#x7684;&#x683C;&#x5F0F;&#x81EA;&#x7136;&#x5C31;&#x662F; JSON &#x4E86;&#x3002;</p>
<p>&#x53C3;&#x8003;&#x7DB2;&#x7AD9; <a href="http://blog.sanc.idv.tw/2012/04/aspnet-mvc-4-web-apihello-web-api.html">http://blog.sanc.idv.tw/2012/04/aspnet-mvc-4-web-apihello-web-api.html</a></p>

        </div>
        <div class="footer-nav">
          <div class="left"><a href="8-json-and-nosql.html"><span class="title">第八章：JSON 與 NoSQL</span></a></div>
          <div class="right"><a href="10-summary.html"><span class="label">Next: </span><span class="title">第十章：結論</span></a></div>
        </div>
      </div>
      <div class="menu toc-menu">
        <li class="menu-item -level-0 -parent">
          <ul class="submenu">
            <li class="menu-item -level-1"><a href="index.html" class="link title  link-index">JSON 精要讀書紀錄</a>
            </li>
            <li class="menu-item -level-1"><a href="1-what-is-json.html" class="link title  link-1-what-is-json">第一章：JSON 是什麼?</a>
            </li>
            <li class="menu-item -level-1"><a href="2-json-syntax.html" class="link title  link-2-json-syntax">第二章：JSON 語法</a>
            </li>
            <li class="menu-item -level-1"><a href="variants.html" class="link title  link-variants">第三章：JSON 資料型別</a>
            </li>
            <li class="menu-item -level-1"><a href="nested-components.html" class="link title  link-nested-components">第四章：JSON 結構描述</a>
            </li>
            <li class="menu-item -level-1"><a href="layouts.html" class="link title  link-layouts">第五章：JSON 安全考量</a>
            </li>
            <li class="menu-item -level-1"><a href="helpers.html" class="link title  link-helpers">第六章：JavaScript 的 XML HttpRequest 與 API</a>
            </li>
            <li class="menu-item -level-1"><a href="helpers.html" class="link title  link-helpers-2">第七章：JSON 與用戶端架構</a>
            </li>
            <li class="menu-item -level-1"><a href="8-json-and-nosql.html" class="link title  link-8-json-and-nosql">第八章：JSON 與 NoSQL</a>
            </li>
            <li class="menu-item -level-1"><a href="9-JSON_On_Server.html" class="link title -active link-9-json_on_server">第九章：伺服器端的 JSON</a>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#9-1-json" class="link title link-9-1-json">9-1 序列化、反序列化與請求JSON</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#9-1-1-asp-.net" class="link title link-9-1-1-asp-.net">9-1-1 ASP .NET</a>
                </li>
                <li class="menu-item -level-2"><a href="#9-1-2-json" class="link title link-9-1-2-json">9-1-2 JSON 序列化</a>
                </li>
                <li class="menu-item -level-2"><a href="#9-1-3-json" class="link title link-9-1-3-json">9-1-3 JSON 反序列化</a>
                </li>
                <li class="menu-item -level-2"><a href="#9-1-4-json" class="link title link-9-1-4-json">9-1-4 請求 JSON</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1"><a href="10-summary.html" class="link title  link-10-summary">第十章：結論</a>
            </li>
          </ul>
        </li>
      </div>
    </div>
  </body>
</html>