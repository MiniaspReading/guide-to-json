<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="assets/style.css?t=a44c9e9d">
    <link rel="stylesheet" href="http://ricostacruz.com/docpress-rsc/style.css">
    <script src="assets/script.js?t=2bcc4b59"></script>
    <title>第八章：JSON 與 NoSQL</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="body page-8-json-and-nosql">
        <div class="header-nav">
          <div class="right"><a href="https://github.com/MiniaspReading/guide-to-json" data-title="MiniaspReading/guide-to-json" class="iconlink">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="json-nosql">&#x7B2C;&#x516B;&#x7AE0; JSON &#x8207; NoSQL</h1>
<p>&#x4E00;&#x822C; Web &#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#x901A;&#x5E38;&#x90FD;&#x662F;&#x4F7F;&#x7528;&#x95DC;&#x806F;&#x6027;&#x8CC7;&#x6599;&#x5EAB;&#x505A;&#x70BA;&#x8CC7;&#x6599;&#x5132;&#x5B58;&#x9AD4;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x7684;&#x900F;&#x904E; SQL &#x8A9E;&#x6CD5;&#x505A;&#x65B0;&#x589E;&#x3001;&#x4FEE;&#x6539;&#x3001;&#x522A;&#x9664;&#x8207;&#x67E5;&#x8A62;&#x5C0D;&#x8CC7;&#x6599;&#x9032;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;
&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x7D50;&#x5408;&#x5169;&#x500B;&#x8868;&#x683C;&#x7684;&#x67E5;&#x8A62;&#x3002;</p>
<pre><code class="lang-sh">SELECT Account.firstName,Account.lastName,Address.street,Address.zip From Account JOIN Address
ON Account.accoundId = Address.accountId;
</code></pre>
<p>&#x900F;&#x904E;SQL JOIN &#x8A9E;&#x53E5;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x53D6;&#x5F97; <em>Account</em> &#x8207; <em>Address</em> &#x9019;&#x5169;&#x500B;&#x8CC7;&#x6599;&#x8868;&#x7684;&#x95DC;&#x806F;&#x8CC7;&#x6599;&#xFF1A;<em>firstName</em>&#xFF0C;<em>lastName</em>&#xFF0C;<em>street</em>&#x8207;<em>zip</em>&#x3002;</p>
<p><b> NoSQL &#x4E0D;&#x662F;&#x95DC;&#x806F;&#x5F0F;&#x8CC7;&#x6599;&#x5EAB;&#xFF0C;&#x7121;&#x6CD5;&#x4F7F;&#x7528; SQL &#x8A9E;&#x53E5;&#x67E5;&#x8A62;&#x8CC7;&#x6599;&#x5DF2;&#x53D6;&#x5F97;&#x95DC;&#x806F;&#x8868;&#x683C;&#x3002;</b> NoSQL&#x662F;&#x4E00;&#x500B;&#x3010;&#x9375;-&#x503C;&#x5132;&#x5B58;&#x9AD4;&#x3011;&#x6709;&#x4E9B;&#x662F;XML&#x6587;&#x4EF6;&#x6216;JSON&#x6587;&#x4EF6;&#xFF0C;
&#x6211;&#x5011;&#x8A0E;&#x8AD6;&#x4E00;&#x7A2E;&#x4F7F;&#x7528;JSON&#x6587;&#x4EF6;&#x4F86;&#x5132;&#x5B58;&#x8CC7;&#x6599;&#x7684;&#x6587;&#x4EF6;&#x5132;&#x5B58;&#x9AD4;&#x8CC7;&#x6599;&#x5EAB; <b><a href="http://couchdb.apache.org/">CouchDB</a> </b>&#x3002;</p>
<h2 id="8-1-couchdb">8-1 CouchDB &#x8CC7;&#x6599;&#x5EAB;</h2>
<p><a href="http://couchdb.apache.org/">CouchDB</a> &#x662F;&#x4E00;&#x7A2E; NoSQL &#x8CC7;&#x6599;&#x5EAB;&#xFF0C;&#x4EE5;&#x975E;&#x95DC;&#x806F;&#x5F0F;&#x65B9;&#x5F0F;&#x5132;&#x5B58; JSON &#x6587;&#x4EF6;&#x8CC7;&#x6599;&#x3002;</p>
<p>CouchDB &#x7DB2;&#x7AD9;&#x4F4D;&#x7F6E;&#xFF1A;<a href="http://couchdb.apache.org/" target="_blank">http://couchdb.apache.org/</a></p>
<p><font color="red"><i>&#x4EE5;&#x3010;NoSQL&#x3011;&#x51A0;&#x540D;&#x7684;&#x8CC7;&#x6599;&#x5EAB;&#xFF0C;&#x5C31;&#x662F;&#x544A;&#x8A34;&#x6211;&#x5011;&#x4ED6;&#x4E0D;&#x662F;&#x95DC;&#x806F;&#x5F0F;&#x8CC7;&#x6599;&#x5EAB;&#xFF0C;&#x6211;&#x5011;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;SQL&#x8A9E;&#x53E5;&#x4F86;&#x67E5;&#x8A62;&#x8CC7;&#x6599;&#x3002;</i></font></p>
<p>&#x7576;&#x6211;&#x5011;&#x8981;&#x67E5;&#x8A62;&#x5E33;&#x6236;&#x8207;&#x5730;&#x5740;&#x9019;&#x7E3D;&#x95DC;&#x806F;&#x5F0F;&#x8CC7;&#x6599;&#x5EAB;&#x6642;&#xFF0C;&#x4F7F;&#x7528; <a href="http://couchdb.apache.org/">CouchDB</a> &#x6642;&#xFF0C;&#x8CC7;&#x6599;&#x7684;&#x95DC;&#x4FC2;&#x4E0D;&#x6703;&#x8981;&#x6C42;&#x4F7F;&#x7528;&#x8CC7;&#x6599;&#x8868;&#x5206;&#x958B;&#x7684;&#x65B9;&#x5F0F;&#x5132;&#x5B58;
&#x4E26;&#x65BC;&#x8B80;&#x53D6;&#x6642;&#x7D44;&#x5408;&#xFF0C;&#x95DC;&#x4FC2;&#x662F;&#x7531;&#x8CC7;&#x6599;&#x8868;&#x9054;&#x3002;</p>
<h4 id="json">&#x7BC4;&#x4F8B;&#x3010;&#x8868;&#x793A;&#x5E33;&#x6236;&#x7684;JSON&#x7269;&#x4EF6;&#x3011;</h4>
<pre><code class="lang-sh">{
  <span class="pl-s">&quot;firstName&quot;</span>: <span class="pl-s">&quot;Bob&quot;</span>,
  <span class="pl-s">&quot;lastName&quot;</span> : <span class="pl-s">&quot;Barker&quot;</span>,
  <span class="pl-s">&quot;age&quot;</span> : <span class="hljs-number">91</span>,
  <span class="pl-s">&quot;address&quot;</span> : [
	{
	<span class="pl-s">&quot;street&quot;</span> : <span class="pl-s">&quot;123 fake st&quot;</span>,
	<span class="pl-s">&quot;city&quot;</span> : <span class="pl-s">&quot;Somewhere&quot;</span>,
	<span class="pl-s">&quot;state&quot;</span> : <span class="pl-s">&quot;OR&quot;</span>,
	<span class="pl-s">&quot;zip&quot;</span> : <span class="pl-s">&quot;97520&quot;</span>
	},
	{
	<span class="pl-s">&quot;street&quot;</span> : <span class="pl-s">&quot;456 fake st&quot;</span>,
	<span class="pl-s">&quot;city&quot;</span> : <span class="pl-s">&quot;Some Place&quot;</span>,
	<span class="pl-s">&quot;state&quot;</span> : <span class="pl-s">&quot;CA&quot;</span>,
	<span class="pl-s">&quot;zip&quot;</span> : <span class="pl-s">&quot;9600&quot;</span>
	}
	]
}
</code></pre>
<p>&#x7576;&#x6211;&#x5011;&#x5411; <a href="http://couchdb.apache.org/">CouchDB</a>  &#x8CC7;&#x6599;&#x5EAB;&#x67E5;&#x8A62;&#x5E33;&#x6236;&#x8CC7;&#x6599;&#x6642;&#xFF0C;&#x6703;&#x53D6;&#x5F97;&#x4E00;&#x4EFD;&#x7D50;&#x69CB;&#x5316;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x7121;&#x9808;&#x91CD;&#x7D44;&#x95DC;&#x806F;&#x6027;&#xFF0C;&#x9019;&#x7A2E;&#x65B9;&#x5F0F;&#x65E2;&#x65B9;&#x4FBF;&#x53C8;&#x5FEB;&#x3002;
&#x4F46;&#x662F;&#x7576;&#x9700;&#x8981;&#x591A;&#x5C64;&#x7684;&#x95DC;&#x806F;&#xFF0C;&#x9019;&#x7A2E;&#x6587;&#x4EF6;&#x6A21;&#x5F0F;&#x5F88;&#x5FEB;&#x5C31;&#x6703;&#x9047;&#x5230;&#x9EBB;&#x7169;&#x3002;&#x4F8B;&#x5982;&#x5730;&#x5740;&#x8207;&#x57CE;&#x5E02;&#x8981;&#x8207;&#x4E0D;&#x540C;&#x7684;&#x8868;&#x4F5C;&#x95DC;&#x806F;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x57CE;&#x5E02;
&#x8207;&#x90F5;&#x905E;&#x5340;&#x865F;&#x7522;&#x751F;&#x95DC;&#x806F;&#xFF0C;&#x55AE;&#x4E00;&#x7D50;&#x69CB;&#x6587;&#x4EF6;&#x5C31;&#x6703;&#x5F88;&#x96E3;&#x8868;&#x9054;&#x8907;&#x96DC;&#x7684;&#x95DC;&#x4FC2;&#x3002;</p>
<p><a href="http://couchdb.apache.org/">CouchDB</a>  &#x53E6;&#x4E00;&#x500B;&#x64C5;&#x9577;&#x7684;&#x4E8B;&#x60C5;&#x5C31;&#x662F;&#x8655;&#x88E1;&#x6F14;&#x9032;&#x8CC7;&#x6599;&#x3002;<i>&#x6211;&#x89BA;&#x5F97;&#x7528;&#x3010;&#x8655;&#x88E1;&#x6F14;&#x9032;&#x8CC7;&#x6599;&#x3011;&#x4F86;&#x6558;&#x8FF0;&#x6709;&#x9EDE;&#x62BD;&#x8C61;&#xFF0C;&#x6211;&#x628A;&#x5B83;&#x7A31;&#x70BA;
&#x3010;&#x52A0;&#x6B04;&#x4F4D;&#x3011;&#x9019;&#x6A23;&#x6BD4;&#x8F03;&#x6709;&#x611F;&#x89BA;&#xFF0C;&#x6BCF;&#x7576;&#x5BA2;&#x6236;&#x8981;&#x6539;&#x8CC7;&#x6599;&#x6B04;&#x4F4D;&#x6642;&#xFF0C;&#x5C31;&#x771F;&#x7684;&#x5F88;&#x60F3;....&#x5E6B;&#x4ED6;&#x6539;XDD&#x3002;</i> &#x7576;&#x6211;&#x7684;&#x8CC7;&#x6599;&#x8868;&#x8D8A;&#x8907;&#x96DC;&#x6642;&#xFF0C;
&#x4E5F;&#x8A31;&#x5C31;&#x6703;&#x518D;&#x958B;&#x4E00;&#x500B;&#x8CC7;&#x6599;&#x8868;&#x4F86;&#x5354;&#x52A9;&#x5132;&#x5B58;&#x95DC;&#x806F;&#x8CC7;&#x8A0A;&#x3002;</p>
<p>&#x4F7F;&#x7528; <a href="http://couchdb.apache.org/">CouchDB</a>  &#x6642;&#xFF0C;&#x7576;&#x8CC7;&#x6599;<b>&#x6F14;&#x9032;</b>&#x6642;&#x53EF;&#x4EE5;&#x4E0D;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x7D50;&#x69CB;&#x63CF;&#x8FF0;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;JSON&#x4E2D;&#x4EE5;&#x7269;&#x4EF6;&#x9663;&#x5217;&#x4EE3;&#x8868;&#x96FB;&#x8A71;&#x865F;&#x78BC;&#xFF0C;&#x9019;&#x6A23;&#x6BCF;&#x500B;&#x5E33;&#x865F;
&#x53EF;&#x4EE5;&#x6709;&#x7121;&#x9650;&#x7684;&#x76F8;&#x95DC;&#x96FB;&#x8A71;&#x865F;&#x78BC;&#x76F8;&#x95DC;&#x7D00;&#x9304;&#x3002;</p>
<h4 id="">&#x7BC4;&#x4F8B;&#x3010;&#x7269;&#x4EF6;&#x4EE3;&#x8868;&#x96FB;&#x8A71;&#x865F;&#x78BC;&#x3011;</h4>
<pre><code class="lang-sh">{
  <span class="pl-s">&quot;phoneNumbers&quot;</span> : [
    {
	   <span class="pl-s">&quot;description&quot;</span> : <span class="pl-s">&quot;home phone&quot;</span>,
	   <span class="pl-s">&quot;number&quot;</span> : <span class="pl-s">&quot;02-753-3967&quot;</span>
	},
	{
	   <span class="pl-s">&quot;description&quot;</span> : <span class="pl-s">&quot;cell phone&quot;</span>,
	   <span class="pl-s">&quot;number&quot;</span> : <span class="pl-s">&quot;0935-999-999&quot;</span>
	},
	{
	   <span class="pl-s">&quot;description&quot;</span> : <span class="pl-s">&quot;fax&quot;</span>,
	   <span class="pl-s">&quot;number&quot;</span> : <span class="pl-s">&quot;02-899-9888&quot;</span>
	}
  ]
}
</code></pre>
<p>&#x5982;&#x679C;&#x518D;&#x5EA6;&#x6F14;&#x9032;&#xFF0C;&#x7B2C;&#x4E8C;&#x652F;&#x624B;&#x6A5F;&#x6709;&#x65B0;&#x7684;&#x865F;&#x78BC;&#xFF0C;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x5C07;&#x65B0;&#x624B;&#x6A5F;&#x865F;&#x78BC;&#x76F4;&#x63A5;&#x52A0;&#x5165; <em>phoneNumbers</em> &#x7269;&#x4EF6;&#x4E2D;&#x3002;</p>
<h4 id="">&#x7BC4;&#x4F8B;&#x3010;&#x7269;&#x4EF6;&#x4E2D;&#x52A0;&#x5165;&#x65B0;&#x7684;&#x865F;&#x78BC;&#x3011;</h4>
<pre><code class="lang-sh">{
  <span class="pl-s">&quot;phoneNumbers&quot;</span> : [
    {
	   <span class="pl-s">&quot;description&quot;</span> : <span class="pl-s">&quot;home phone&quot;</span>,
	   <span class="pl-s">&quot;number&quot;</span> : <span class="pl-s">&quot;02-753-3967&quot;</span>
	},
	{
	   <span class="pl-s">&quot;description&quot;</span> : <span class="pl-s">&quot;cell phone&quot;</span>,
	   <span class="pl-s">&quot;number&quot;</span> : <span class="pl-s">&quot;0935-999-999&quot;</span>
	},
	{
	   <span class="pl-s">&quot;description&quot;</span> : <span class="pl-s">&quot;fax&quot;</span>,
	   <span class="pl-s">&quot;number&quot;</span> : <span class="pl-s">&quot;02-899-9888&quot;</span>
	},
	{
	   <span class="pl-s">&quot;description&quot;</span> : <span class="pl-s">&quot;cell phone2&quot;</span>,
	   <span class="pl-s">&quot;number&quot;</span> : <span class="pl-s">&quot;0988-888-888&quot;</span>
	}
  ]
}
</code></pre>
<p>&#x53E6;&#x5916;&#xFF0C;&#x82E5;&#x8981;&#x5728;&#x5E33;&#x6236;&#x4E2D;&#x52A0;&#x5165;&#x65B0;&#x7684;&#x6B04;&#x4F4D;&#xFF0C;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x52A0;&#x5165;&#x65B0;&#x7684;&#x7D00;&#x9304;&#x4E2D;&#xFF0C;&#x7121;&#x9808;&#x4FEE;&#x6539;&#x8CC7;&#x6599;&#x7D50;&#x69CB;&#x63CF;&#x8FF0;&#x3002;</p>
<h4 id="galaxy">&#x7BC4;&#x4F8B;&#x3010;&#x5E33;&#x6236;&#x52A0;&#x5165;&#x65B0;&#x7684;&#x6B04;&#x4F4D;<em>galaxy</em>&#x3011;</h4>
<pre><code class="lang-sh">{
  <span class="pl-s">&quot;firstName&quot;</span>: <span class="pl-s">&quot;Bob&quot;</span>,
  <span class="pl-s">&quot;lastName&quot;</span> : <span class="pl-s">&quot;Barker&quot;</span>,
  <span class="pl-s">&quot;age&quot;</span> : <span class="hljs-number">91</span>,
  <span class="pl-s">&quot;address&quot;</span> : [
				{
				<span class="pl-s">&quot;street&quot;</span> : <span class="pl-s">&quot;123 fake st&quot;</span>,
				<span class="pl-s">&quot;city&quot;</span> : <span class="pl-s">&quot;Somewhere&quot;</span>,
				<span class="pl-s">&quot;state&quot;</span> : <span class="pl-s">&quot;OR&quot;</span>,
				<span class="pl-s">&quot;zip&quot;</span> : <span class="pl-s">&quot;97520&quot;</span>
				},
				{
				<span class="pl-s">&quot;street&quot;</span> : <span class="pl-s">&quot;456 fake st&quot;</span>,
				<span class="pl-s">&quot;city&quot;</span> : <span class="pl-s">&quot;Some Place&quot;</span>,
				<span class="pl-s">&quot;state&quot;</span> : <span class="pl-s">&quot;CA&quot;</span>,
				<span class="pl-s">&quot;zip&quot;</span> : <span class="pl-s">&quot;9600&quot;</span>
				}
  			  ],
    <span class="pl-s">&quot;galaxy&quot;</span> : <span class="pl-s">&quot;Milky Way&quot;</span>				
}
</code></pre>
<h2 id="8-2-couchdb">8-2 &#x5B89;&#x88DD;CouchDB</h2>
<p>&#x4F7F;&#x7528;Ubuntu&#x5B89;&#x88DD;&#x65B9;&#x5F0F;&#x5F88;&#x7C21;&#x55AE;&#xFF0C;&#x7167;&#x8457;&#x5B98;&#x7DB2;&#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x5F0F;&#x9806;&#x5E8F;&#x5B89;&#x88DD;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x3002;</p>
<ol>
<li>
<p>&#x5B89;&#x88DD; ppa-finding &#x5DE5;&#x5177; for 12.04 release</p>
<p><code>sudo apt-get install python-software-properties -y</code></p>
<p><code>sudo apt-get install software-properties-common -y</code></p>
</li>
<li>
<p>&#x6DFB;&#x52A0; PPA &#x3002;PPA &#x8AAA;&#x660E;&#x53C3;&#x8003;&#x7DB2;&#x5740;&#xFF1A;<a href="http://askubuntu.com/questions/4983/what-are-ppas-and-how-do-i-use-them">PPA</a></p>
<p><code>sudo add-apt-repository ppa:couchdb/stable -y</code></p>
</li>
<li>
<p>&#x66F4;&#x65B0;&#x5957;&#x4EF6;</p>
<p><code>sudo apt-get update -y</code></p>
</li>
<li>
<p>&#x79FB;&#x9664;&#x5168;&#x90E8;&#x7684;&#x4E8C;&#x9032;&#x4F4D;&#x5B89;&#x88DD;&#x65B9;&#x5F0F;&#x7684; Couchdb &#x6A94;&#x6848;</p>
<p><code>sudo apt-get remove couchdb couchdb-bin couchdb-common -yf</code></p>
</li>
<li>
<p>&#x958B;&#x59CB;&#x5B89;&#x88DD; Couchd&#xFF0C;&#x52A0;&#x5165;-V &#x53C3;&#x6578;&#xFF0C;&#x53EF;&#x4EE5;&#x89C0;&#x770B;&#x5B89;&#x88DD;&#x8A0A;&#x606F;</p>
<p><code>sudo apt-get install -V couchdb</code></p>
<blockquote>
<p>Reading package lists...<br>
Done Building dependency tree<br>
Reading state information...<br>
Done<br>
The following extra packages will be installed:<br>
couchdb-bin (x.y.z0-0ubuntu2)<br>
couchdb-common (x.y.z-   0ubuntu2)<br>
couchdb (x.y.z-0ubuntu2)</p>
</blockquote>
</li>
<li>
<p>&#x505C;&#x6B62; Couchdb</p>
<p><code>sudo stop couchdb</code></p>
<blockquote>
<p>couchdb stop/waiting</p>
</blockquote>
<ul>
<li>&#x82E5;&#x6709;&#x9700;&#x6C42;&#x53EF;&#x4FEE;&#x6539; /etc/couchdb/local.ini &#x8A2D;&#x5B9A;&#x6A94;&#x7684; &apos;bind_address=0.0.0.0&apos; &#x4FEE;&#x6539;&#x9023;&#x7DDA;IP&#x3002;*</li>
</ul>
</li>
<li>
<p>&#x555F;&#x52D5; CouchDB &#x6307;&#x4EE4;</p>
<p><code>sudo start couchdb</code></p>
<blockquote>
<p>couchdb start/running, process 3541</p>
</blockquote>
</li>
</ol>
<p>&#x99AC;&#x4E0A;&#x900F;&#x904E;&#x7DB2;&#x5740;&#x9023;&#x7DDA; CouchDB&#xFF0C;<a href="http://127.0.0.1:5984/">http://127.0.0.1:5984/</a> &#x82E5;&#x5DF2;&#x6B63;&#x5E38;&#x555F;&#x52D5;&#xFF0C;&#x5C31;&#x4EE5;&#x900F;&#x904E;&#x7DB2;&#x5740;&#x65B9;&#x5F0F;&#x770B;&#x5230;&#x7DB2;&#x9801;&#x986F;&#x793A;&#x7684;&#x5167;&#x5BB9;&#xFF0C;&#x4EE3;&#x8868;&#x60A8;&#x7684; CouchDB &#x5DF2;&#x5B89;&#x88DD;&#x6210;&#x529F;&#x3002;</p>
<pre><code class="lang-sh">{
    <span class="pl-s">&quot;couchdb&quot;</span>: <span class="pl-s">&quot;Welcome&quot;</span>,
    <span class="pl-s">&quot;uuid&quot;</span>: <span class="pl-s">&quot;ca53fa82a896fde3fe1f35d53162bedb&quot;</span>,
    <span class="pl-s">&quot;version&quot;</span>: <span class="pl-s">&quot;1.6.1&quot;</span>,
    <span class="pl-s">&quot;vendor&quot;</span>: {
        <span class="pl-s">&quot;name&quot;</span>: <span class="pl-s">&quot;Ubuntu&quot;</span>,
        <span class="pl-s">&quot;version&quot;</span>: <span class="pl-s">&quot;14.04&quot;</span>
    }
}

</code></pre>
<h4 id="">&#x76F8;&#x95DC;&#x9023;&#x7D50;</h4>
<p><a href="https://launchpad.net/~couchdb/+archive/ubuntu/stable">Ubuntu &#x5B89;&#x88DD;&#x65B9;&#x5F0F;</a><br>
<a href="http://docs.couchdb.org/en/1.6.1/install/index.html">&#x5176;&#x4ED6;&#x5B89;&#x88DD;&#x65B9;&#x5F0F;</a></p>
<h2 id="8-3-couchdb-api">8-3 CouchDB API</h2>
<p>&#x4F7F;&#x7528; CouchDB &#x6642;&#xFF0C;&#x5411;&#x8CC7;&#x6599;&#x5EAB;&#x67E5;&#x8A62;&#x8CC7;&#x6599;&#x65B9;&#x5F0F;&#x662F;&#x900F;&#x904E;Http&#x8ACB;&#x6C42;&#x8CC7;&#x6E90;&#x3002;&#x5E95;&#x4E0B;&#x793A;&#x7BC4;&#x5982;&#x4F55;&#x65B0;&#x589E;&#x8CC7;&#x6599;&#x5EAB;&#x8207;&#x8CC7;&#x6599;&#x3002;</p>
<ul>
<li>&#x67E5;&#x8A62;&#x76EE;&#x524D;&#x6211;&#x5011;&#x7684;&#x8CC7;&#x6599;&#x5EAB;&#x6709;&#x54EA;&#x4E9B;&#x9810;&#x8A2D;&#x7684;&#x8CC7;&#x6599;&#x5EAB;&#x3002;</li>
</ul>
<pre><code>http://127.0.0.1:5984/_all_dbs   
</code></pre>
<pre><code class="lang-sh">[
    <span class="pl-s">&quot;_replicator&quot;</span>,
    <span class="pl-s">&quot;_users&quot;</span>
]
</code></pre>
<p>&#x986F;&#x793A;&#x76EE;&#x524D;&#x6211;&#x5011;&#x53EA;&#x6709;&#x5169;&#x500B;&#x9810;&#x8A2D;&#x7684;&#x8CC7;&#x6599;&#x5EAB;&#xFF0C;<em>_replicator</em> &#x548C; <em>_users</em>&#x3002;</p>
<ul>
<li>&#x67E5;&#x8A62; <em>_users</em> &#x8CC7;&#x6599;&#x5EAB;&#x8CC7;&#x8A0A;&#x3002;</li>
</ul>
<pre><code>http://127.0.0.1:5984/_users   
</code></pre>
<pre><code class="lang-sh">{
    <span class="pl-s">&quot;db_name&quot;</span>: <span class="pl-s">&quot;_users&quot;</span>,
    <span class="pl-s">&quot;doc_count&quot;</span>: <span class="hljs-number">1</span>,
    <span class="pl-s">&quot;doc_del_count&quot;</span>: <span class="hljs-number">0</span>,
    <span class="pl-s">&quot;update_seq&quot;</span>: <span class="hljs-number">1</span>,
    <span class="pl-s">&quot;purge_seq&quot;</span>: <span class="hljs-number">0</span>,
    <span class="pl-s">&quot;compact_running&quot;</span>: <span class="pl-c1">false</span>,
    <span class="pl-s">&quot;disk_size&quot;</span>: <span class="hljs-number">4194</span>,
    <span class="pl-s">&quot;data_size&quot;</span>: <span class="hljs-number">2141</span>,
    <span class="pl-s">&quot;instance_start_time&quot;</span>: <span class="pl-s">&quot;1454122440071841&quot;</span>,
    <span class="pl-s">&quot;disk_format_version&quot;</span>: <span class="hljs-number">6</span>,
    <span class="pl-s">&quot;committed_update_seq&quot;</span>: <span class="hljs-number">1</span>
}
</code></pre>
<p>&#x6CE8;&#x610F; <em>doc_count</em> &#x9019;&#x500B;&#x540D;&#x7A31;-&#x503C;&#x5C0D;&#xFF0C;&#x4ED6;&#x4EE3;&#x8868;&#x8CC7;&#x6599;&#x5EAB;&#x6587;&#x4EF6;&#x6578;&#xFF0C;&#x76EE;&#x524D;&#x662F;1&#x3002;</p>
<ul>
<li>&#x67E5;&#x8A62;*_users*&#x8CC7;&#x6599;&#x5EAB;&#x4E2D;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x8B58;&#x5225;&#x9663;&#x5217;&#x3002;</li>
</ul>
<pre><code>http://127.0.0.1:5984/_users/_all_docs   
</code></pre>
<pre><code class="lang-sh">{
    <span class="pl-s">&quot;total_rows&quot;</span>: <span class="hljs-number">1</span>,
    <span class="pl-s">&quot;offset&quot;</span>: <span class="hljs-number">0</span>,
    <span class="pl-s">&quot;rows&quot;</span>: [
        {
            <span class="pl-s">&quot;id&quot;</span>: <span class="pl-s">&quot;_design/_auth&quot;</span>,
            <span class="pl-s">&quot;key&quot;</span>: <span class="pl-s">&quot;_design/_auth&quot;</span>,
            <span class="pl-s">&quot;value&quot;</span>: {
                <span class="pl-s">&quot;rev&quot;</span>: <span class="pl-s">&quot;1-75efcce1f083316d622d389f3f9813f7&quot;</span>
            }
        }
    ]
}
</code></pre>
<p>&#x76EE;&#x524D;&#x53EA;&#x6709;&#x986F;&#x793A;&#x6709;&#x4E00;&#x500B;&#x6587;&#x4EF6;&#x8B58;&#x5225;&#x9663;&#x5217;&#x3002;</p>
<ul>
<li>&#x900F;&#x904E;&#x67E5;&#x8A62;*_users*&#x8CC7;&#x6599;&#x5EAB;&#x4E2D;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x8B58;&#x5225;&#x9663;&#x5217;&#x8ACB;&#x6C42;&#x6587;&#x4EF6;&#x3002;</li>
</ul>
<pre><code>http://127.0.0.1:5984/_users/_design/_aut   
</code></pre>
<pre><code class="lang-sh">{
    <span class="pl-s">&quot;_id&quot;</span>: <span class="pl-s">&quot;_design/_auth&quot;</span>,
    <span class="pl-s">&quot;_rev&quot;</span>: <span class="pl-s">&quot;1-75efcce1f083316d622d389f3f9813f7&quot;</span>,
    <span class="pl-s">&quot;language&quot;</span>: <span class="pl-s">&quot;javascript&quot;</span>,
    <span class="pl-s">&quot;validate_doc_update&quot;</span>: <span class="pl-s">&quot;*etc...*&quot;</span>
}
</code></pre>
<ul>
<li>&#x5EFA;&#x7ACB;&#x4E00;&#x500B;&#x65B0;&#x8CC7;&#x6599;&#x5EAB;&#xFF0C;&#x4FEE;&#x6539;Http &#x70BA; <em>PUT</em> &#x52D5;&#x8A5E;&#xFF0C;&#x5EFA;&#x7ACB;&#x4E00;&#x500B;<em>account</em>&#x8CC7;&#x6599;&#x8868;&#x3002;</li>
</ul>
<pre><code>PUT http://127.0.0.1:5984/accounts 
</code></pre>
<pre><code class="lang-sh">{<span class="pl-s">&quot;ok&quot;</span>:<span class="pl-c1">true</span>}
</code></pre>
<p>&#x4EE3;&#x8868;&#x5EFA;&#x7ACB;&#x6210;&#x529F;&#x3002;&#x900F;&#x904E;&#x524D;&#x9762;&#x7684;&#x67E5;&#x8A62;&#x8CC7;&#x6599;&#x5EAB; API&#xFF0C;&#x5F97;&#x77E5;&#x76EE;&#x524D;&#x6211;&#x5011;&#x6709;3&#x500B;&#x8CC7;&#x6599;&#x8868;&#x3002;</p>
<pre><code class="lang-sh">[
    <span class="pl-s">&quot;_replicator&quot;</span>,
    <span class="pl-s">&quot;_users&quot;</span>,
    <span class="pl-s">&quot;accounts&quot;</span>
]
</code></pre>
<ul>
<li>&#x5EFA;&#x7ACB;&#x4E00;&#x500B;&#x65B0;&#x8CC7;&#x6599;&#xFF0C;&#x4FEE;&#x6539;Http &#x70BA; <em>POST</em> &#x52D5;&#x8A5E;&#x3002;<em>&#x8ACB;&#x78BA;&#x8A8D; Content-type:application/json</em></li>
</ul>
<pre><code>POST http://127.0.0.1:5984/accounts 
</code></pre>
<p>&#x50B3;&#x9001;&#x6587;&#x4EF6;&#x5167;&#x5BB9;&#x5982;&#x4E0B;&#x3002;</p>
<pre><code class="lang-sh">{
  <span class="pl-s">&quot;name&quot;</span> : <span class="pl-s">&quot;Shon&quot;</span>,
  <span class="pl-s">&quot;age&quot;</span> : <span class="hljs-number">20</span>,
  <span class="pl-s">&quot;address&quot;</span> : { 
      <span class="pl-s">&quot;street&quot;</span> :<span class="pl-s">&quot;450 Fakey Fake st&quot;</span>,
      <span class="pl-s">&quot;city&quot;</span> : <span class="pl-s">&quot;somewhere&quot;</span>,
      <span class="pl-s">&quot;state&quot;</span> : <span class="pl-s">&quot;CA&quot;</span>,
      <span class="pl-s">&quot;zip&quot;</span> : <span class="pl-s">&quot;123&quot;</span>
      },
   <span class="pl-s">&quot;gender&quot;</span> : <span class="pl-s">&quot;male&quot;</span>
}
</code></pre>
<p>&#x56DE;&#x61C9;&#x5982;&#x4E0B;&#xFF0C;&#x5C31;&#x4EE3;&#x8868;&#x5EFA;&#x7ACB;&#x6210;&#x529F;&#x3002;</p>
<pre><code class="lang-sh">{
    <span class="pl-s">&quot;ok&quot;</span>:<span class="pl-c1">true</span>,
    <span class="pl-s">&quot;id&quot;</span>:<span class="pl-s">&quot;0e2271540bd5a17dd4fd4fc3e800125c&quot;</span>,
    <span class="pl-s">&quot;rev&quot;</span>:<span class="pl-s">&quot;1-06eb6f58155be163f2588a34d3ff5832&quot;</span>
}

</code></pre>
<p>&#x900F;&#x904E;&#x524D;&#x8FF0;&#x7684;&#x67E5;&#x8A62;&#x5373;&#x53EF;&#x5F97;&#x77E5;&#x8A72;&#x7B46;&#x8CC7;&#x6599;&#x7684;&#x5167;&#x5BB9;&#x3002;&#x6700;&#x5F8C;&#x4E5F;&#x53EF;&#x4EE5;&#x900F;&#x904E;&#x7DB2;&#x9801;&#x64CD;&#x4F5C;&#x7684;&#x65B9;&#x5F0F;&#x5B8C;&#x6210;&#x4E0A;&#x8FF0;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x5728;&#x7DB2;&#x5740;&#x5F8C;&#x9762;&#x52A0;&#x5165; _utils&#x3002;<br>
<a href="http://127.0.0.1:5984/_utils/">http://127.0.0.1:5984/_utils/</a></p>
<h4 id="">&#x76F8;&#x95DC;&#x9023;&#x7D50;</h4>
<p><a href="http://docs.couchdb.org/en/1.6.1/intro/api.html#">CouchDB API</a></p>

        </div>
        <div class="footer-nav">
          <div class="left"><a href="helpers.html"><span class="title">第七章：JSON 與用戶端架構</span></a></div>
          <div class="right"><a href="9-JSON_On_Server.html"><span class="label">Next: </span><span class="title">第九章：伺服器端的 JSON</span></a></div>
        </div>
      </div>
      <div class="menu toc-menu">
        <li class="menu-item -level-0 -parent">
          <ul class="submenu">
            <li class="menu-item -level-1"><a href="index.html" class="link title  link-index">JSON 精要讀書紀錄</a>
            </li>
            <li class="menu-item -level-1"><a href="1-what-is-json.html" class="link title  link-1-what-is-json">第一章：JSON 是什麼?</a>
            </li>
            <li class="menu-item -level-1 -parent"><a href="elements.html" class="link title  link-elements">第二章：JSON 語法</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="components.html" class="link title  link-components">可以視情況增減檔案</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1"><a href="variants.html" class="link title  link-variants">第三章：JSON 資料型別</a>
            </li>
            <li class="menu-item -level-1"><a href="nested-components.html" class="link title  link-nested-components">第四章：JSON 結構描述</a>
            </li>
            <li class="menu-item -level-1"><a href="layouts.html" class="link title  link-layouts">第五章：JSON 安全考量</a>
            </li>
            <li class="menu-item -level-1"><a href="helpers.html" class="link title  link-helpers">第六章：JavaScript 的 XML HttpRequest 與 API</a>
            </li>
            <li class="menu-item -level-1"><a href="helpers.html" class="link title  link-helpers-2">第七章：JSON 與用戶端架構</a>
            </li>
            <li class="menu-item -level-1"><a href="8-json-and-nosql.html" class="link title -active link-8-json-and-nosql">第八章：JSON 與 NoSQL</a>
            </li>
            <li class="menu-item -level-1"><a href="#8-1-couchdb" class="link title link-8-1-couchdb">8-1 CouchDB 資料庫</a>
            </li>
            <li class="menu-item -level-1"><a href="#8-2-couchdb" class="link title link-8-2-couchdb">8-2 安裝CouchDB</a>
            </li>
            <li class="menu-item -level-1"><a href="#8-3-couchdb-api" class="link title link-8-3-couchdb-api">8-3 CouchDB API</a>
            </li>
            <li class="menu-item -level-1"><a href="9-JSON_On_Server.html" class="link title  link-9-json_on_server">第九章：伺服器端的 JSON</a>
            </li>
            <li class="menu-item -level-1"><a href="summary.html" class="link title  link-summary">第十章：結論</a>
            </li>
          </ul>
        </li>
      </div>
    </div>
  </body>
</html>